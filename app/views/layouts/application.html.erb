<!DOCTYPE html>
<html>
  <head>
    <title>RubyFlashCard</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= display_meta_tags(default_meta_tags) %>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <%= favicon_link_tag 'favicon.png' %>
    <%= stylesheet_link_tag "tailwind", "inter-font", "data-turbo-track": "reload" %>

    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%#= javascript_importmap_tags 'application'  %>
    <%= vite_client_tag %>
    <%= vite_javascript_tag 'application' %>
  </head>

  <body class="flex flex-col min-h-screen">
    <header class="display flex justify-around">
      <% if current_user %>
        <%= link_to image_tag("logo.png", alt: "ロゴ", class: "w-24 md:w-32 h-12"), root_path, class:"text-3xl ms-5 mt-2" %>
        <%= link_to "メソッド一覧", user_ruby_methods_path,class:" mt-4" if current_user.challenged_ruby_methods.present? %>
        <%= link_to "管理者用モジュール一覧",ruby_modules_path, class:" mt-4" if current_user.admin %>
        <%= link_to "管理者用メソッド一覧", ruby_methods_path,class:" mt-4"  if current_user.admin %>
        <%= link_to "フラッシュカードに挑戦する", quiz_new_path,class:" mt-4 hidden md:inline-block" %>
        <div class="dropdown dropdown-bottommb mt-3">
          <label tabindex="0" class="user-icon"><%= image_tag(current_user.image, size: "60x62") %></label>
          <div class="tooltip tooltip-bottom" data-tip="最大Lv.<%= RubyMethod.count %>に向けて頑張ろう💪">
            <span>Lv.<%= UserRubyMethod.where(user_id: current_user, remembered: true).count %>🔥</span>
          </div>
          <ul tabindex="0" class="dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box">
            <li><%= button_to 'ログアウト',logout_path, method: :delete, data: { turbo: false } if user_signed_in? %></li>
          </ul>
        </div>
      <% end %>
    </header>
    <main class="container m-auto max-w-5xl mt-5 px-5 flex">
      <%= yield %>
    </main>
    <footer class="is-size-7 mt-auto">
      <%= render "shared/footer" %>
    </footer>
  </body>
</html>
